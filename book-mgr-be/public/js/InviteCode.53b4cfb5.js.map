{"version":3,"sources":["webpack:///./src/views/InviteCode/index.vue","webpack:///./src/views/InviteCode/index.js","webpack:///./src/views/InviteCode/index.vue?8621"],"names":["title","value","count","min","max","type","add","pagination","bordered","columns","data-source","list","status","record","user","actions","size","remove","style","current","curPage","pageSize","total","setPage","dataIndex","slots","customRender","defineComponent","setup","ref","getList","inviteCode","res","result","success","data","l","t","onMounted","page","message","_id","msg","render"],"mappings":"oJAI+E,O,iBAEzB,M,iBASoC,M,uQAdtF,eAyBM,YAxBF,eAuBS,GAvBDA,MAAM,SAAO,C,wBACjB,iBAIM,CAJN,eAIM,YAHF,eAA+D,GAAtCC,MAAO,EAAAC,M,gDAAA,EAAAA,MAAK,IAAGC,IAAK,EAAIC,IAAK,K,oBAEtD,eAAmD,GAAzCC,KAAK,UAAW,QAAO,EAAAC,K,yBAAK,iBAAE,C,4BAE5C,eAAa,GACb,eAUM,YATF,eAOU,GAPAC,YAAY,EAAOC,SAAA,GAAUC,QAAS,EAAAA,QAAUC,cAAa,EAAAC,M,CACpDC,OAAM,gBACb,gBADiBC,EACjB,EADiBA,OACjB,MADuB,C,8BACpBA,EAAOC,KAAI,oBAEPC,QAAO,gBACd,gBADkBF,EAClB,EADkBA,OAClB,MADwB,CACxB,eAA2E,GAAjEG,KAAK,QAAS,QAAK,mBAAE,EAAAC,OAAOJ,IAASR,KAAK,U,yBAAU,iBAAE,C,qEAKhF,eAIW,GAJDa,MAAA,uBAAwB,C,wBAC9B,iBAEe,CAFf,eAEe,GAFQC,QAAS,EAAAC,Q,kDAAA,EAAAA,QAAO,IAAGC,SAAU,GAAKC,MAAO,EAAAA,MAAQ,SAAQ,EAAAC,S,6HChB1Fd,EAAU,CACZ,CACIT,MAAO,MACPwB,UAAW,QAEf,CACIxB,MAAO,OACPyB,MAAO,CACHC,aAAc,WAGtB,CACI1B,MAAO,KACPyB,MAAO,CACHC,aAAc,aAKXC,iBAAgB,CAC3BC,MAD2B,WAEvB,IAAM1B,EAAQ2B,eAAI,GACZT,EAAUS,eAAI,GACdlB,EAAOkB,eAAI,IACXP,EAAQO,eAAI,GAEZC,EAAO,yDAAG,oHACMC,OAAWpB,KAAKS,EAAQnB,MAAO,IADrC,OACN+B,EADM,OAGZC,eAAOD,GAAKE,SAAQ,YAAqC,QAAlCC,KAAcC,EAAoB,EAA1BzB,KAAgB0B,EAAU,EAAjBf,MACpCX,EAAKV,MAAQmC,EACbd,EAAMrB,MAAQoC,KALN,2CAAH,qDASbC,gBAAU,WACNR,OAGJ,IAAMP,EAAU,SAACgB,GACbnB,EAAQnB,MAAQsC,EAChBT,KAGExB,EAAG,yDAAG,oHACUyB,OAAWzB,IAAIJ,EAAMD,OAD/B,OACF+B,EADE,OAERC,eAAOD,GACFE,SAAQ,WACLM,OAAQN,QAAR,eAAwBhC,EAAMD,MAA9B,UACA6B,OALA,2CAAH,qDAUHb,EAAM,yDAAG,8GAASwB,EAAT,EAASA,IAAT,SACOV,OAAWd,OAAOwB,GADzB,OACLT,EADK,OAEXC,eAAOD,GACFE,SAAQ,YAAa,IAAVQ,EAAU,EAAVA,IACRF,OAAQN,QAAQQ,GAChBZ,OALG,2CAAH,sDAQZ,MAAO,CACH5B,QACAS,OACAW,QACAF,UACAX,UACAc,UACAjB,MACAW,aCxEZ,EAAO0B,OAASA,EAED","file":"js/InviteCode.53b4cfb5.js","sourcesContent":["<template>\r\n    <div>\r\n        <a-card title=\"邀请码管理\">\r\n            <div>\r\n                <a-input-number  v-model:value=\"count\" :min=\"1\" :max=\"10000\" />\r\n                &nbsp;\r\n                <a-button type=\"primary\" @click=\"add\">添加</a-button>\r\n            </div>\r\n            <a-divider />\r\n            <div>\r\n                <a-table :pagination=\"false\" bordered :columns=\"columns\" :data-source=\"list\">\r\n                        <template #status=\"{ record }\" >\r\n                            {{ record.user ? '已使用' : '未使用' }}\r\n                        </template>\r\n                        <template #actions=\"{ record }\" >\r\n                            <a-button size=\"small\" @click=\"remove(record)\" type=\"danger\" >删除</a-button>\r\n                        </template>\r\n                </a-table>\r\n\r\n            </div>\r\n            <flex-end style=\"margin-top: 24px\">\r\n                <a-pagination  v-model:current=\"curPage\" :pageSize=\"20\" :total=\"total\" @change=\"setPage\">\r\n\r\n                </a-pagination>\r\n            </flex-end>\r\n        </a-card>\r\n    </div>\r\n</template>\r\n\r\n<script src=\"./index.js\"></script>\r\n","import { defineComponent, ref, onMounted, } from 'vue';\r\nimport { inviteCode } from '@/service';\r\nimport { result, formatTimestamp } from '@/helpers/utils';\r\nimport { message } from 'ant-design-vue'\r\n\r\nconst columns = [\r\n    {\r\n        title: '邀请码',\r\n        dataIndex: 'code',\r\n    },\r\n    {\r\n        title: '使用状态',\r\n        slots: {\r\n            customRender: 'status',\r\n        },\r\n    },\r\n    {\r\n        title: '操作',\r\n        slots: {\r\n            customRender: 'actions',\r\n        },\r\n    },\r\n];\r\n\r\nexport default defineComponent({\r\n    setup() {\r\n        const count = ref(1);\r\n        const curPage = ref(1);\r\n        const list = ref([]);\r\n        const total = ref(0);\r\n\r\n        const getList = async () => {\r\n            const res = await inviteCode.list(curPage.value, 20);\r\n\r\n            result(res).success(({ data: { list: l, total: t } }) => {\r\n                list.value = l;\r\n                total.value = t;\r\n            });\r\n        };\r\n\r\n        onMounted(() => {\r\n            getList();\r\n        });\r\n\r\n        const setPage = (page) => {\r\n            curPage.value = page;\r\n            getList();\r\n        };\r\n\r\n        const add = async () => {\r\n            const res = await inviteCode.add(count.value);\r\n            result(res)\r\n                .success(() => {\r\n                    message.success(`成功添加 ${count.value} 条邀请码`);\r\n                    getList();\r\n                });\r\n            \r\n        };\r\n\r\n        const remove = async ({ _id }) => {\r\n            const res = await inviteCode.remove(_id);\r\n            result(res)\r\n                .success(({ msg }) => {\r\n                    message.success(msg);\r\n                    getList();\r\n                });\r\n        };\r\n        return {\r\n            count,\r\n            list,\r\n            total,\r\n            curPage,\r\n            columns,\r\n            setPage,\r\n            add,\r\n            remove,\r\n        };\r\n    },\r\n   \r\n});","import { render } from \"./index.vue?vue&type=template&id=79b1e9bf\"\nimport script from \"./index.js?vue&type=script&lang=js\"\nexport * from \"./index.js?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}